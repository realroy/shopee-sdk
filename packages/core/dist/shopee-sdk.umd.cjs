(function(i,R){typeof exports=="object"&&typeof module<"u"?R(exports,require("axios"),require("zod")):typeof define=="function"&&define.amd?define(["exports","axios","zod"],R):(i=typeof globalThis<"u"?globalThis:i||self,R(i.ShopeeSDK={},i.axios,i.zod))})(this,function(i,R,e){"use strict";function O(r){return r.reduce((t,n)=>(t[n]=n,t),{})}async function x(r,...t){let n;return typeof globalThis.crypto<"u"&&(n=await Fe(r,...t)),n=await Ke(r,...t),n}async function Fe(r,...t){const n=new TextEncoder,a=n.encode(r);let s=new Uint8Array;t.forEach(u=>{u&&(s=n.encode(u))});const o=await crypto.subtle.importKey("raw",a,{name:"HMAC",hash:"SHA-256"},!1,["sign"]),_=await crypto.subtle.sign({name:"HMAC",hash:{name:"sha-256"}},o,s),c=new Uint8Array(_);return Array.from(c).map(u=>u.toString(16).padStart(2,"0")).join("")}async function Ke(r,...t){const{createHmac:n}=await import("crypto"),a=n("sha256",r);return t.filter(s=>!!s).forEach(s=>a.update(s)),a.digest("hex")}function A(r){const t=r?r.getTime():Date.now();return Math.round(t/1e3).toString()}async function N(r){const{partner_id:t,partner_key:n,path:a,base_url:s,access_token:o,shop_id:_,params:c={}}=r,m=t.toString(),u=_.toString(),p={};for(const l in c){const P=c[l];Array.isArray(P)?p[l]=[P[0],...P.slice(1).map(qa=>`&${l}=${qa}`)].join(""):P instanceof Date?p[l]=A(P):p[l]=`${P}`}const I=A(),T=new URL(a,s),Ve=await x(n,m,a,I,o,u);return T.search=new URLSearchParams({...p,partner_id:m,shop_id:u,...!!o&&{access_token:o},sign:Ve,timestamp:I}).toString(),T.toString().replace(new RegExp("%26","g"),"&").replace(new RegExp("%3D","g"),"=")}function L(r,t){if(typeof r!="object"||Array.isArray(r)||r===null)return r;const n={};for(const[a,s]of Object.entries(r))n[t(a)]=L(s,t);return n}var j=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ze(r,t,n,a){var s=-1,o=r==null?0:r.length;for(a&&o&&(n=r[++s]);++s<o;)n=t(n,r[s],s,r);return n}var Be=ze;function We(r){return function(t){return r==null?void 0:r[t]}}var Ye=We,Ze=Ye,Je={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Qe=Ze(Je),Xe=Qe,er=typeof j=="object"&&j&&j.Object===Object&&j,rr=er,tr=rr,nr=typeof self=="object"&&self&&self.Object===Object&&self,ar=tr||nr||Function("return this")(),sr=ar,ir=sr,or=ir.Symbol,k=or;function cr(r,t){for(var n=-1,a=r==null?0:r.length,s=Array(a);++n<a;)s[n]=t(r[n],n,r);return s}var ur=cr,pr=Array.isArray,gr=pr,H=k,V=Object.prototype,_r=V.hasOwnProperty,mr=V.toString,y=H?H.toStringTag:void 0;function lr(r){var t=_r.call(r,y),n=r[y];try{r[y]=void 0;var a=!0}catch{}var s=mr.call(r);return a&&(t?r[y]=n:delete r[y]),s}var br=lr,fr=Object.prototype,Sr=fr.toString;function hr(r){return Sr.call(r)}var Ir=hr,F=k,Tr=br,Pr=Ir,Rr="[object Null]",yr="[object Undefined]",K=F?F.toStringTag:void 0;function Er(r){return r==null?r===void 0?yr:Rr:K&&K in Object(r)?Tr(r):Pr(r)}var Or=Er;function Ar(r){return r!=null&&typeof r=="object"}var Lr=Ar,jr=Or,vr=Lr,Cr="[object Symbol]";function Dr(r){return typeof r=="symbol"||vr(r)&&jr(r)==Cr}var xr=Dr,z=k,Nr=ur,kr=gr,Ur=xr,wr=1/0,B=z?z.prototype:void 0,W=B?B.toString:void 0;function Y(r){if(typeof r=="string")return r;if(kr(r))return Nr(r,Y)+"";if(Ur(r))return W?W.call(r):"";var t=r+"";return t=="0"&&1/r==-wr?"-0":t}var Gr=Y,dr=Gr;function $r(r){return r==null?"":dr(r)}var v=$r,Mr=Xe,qr=v,Hr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vr="\\u0300-\\u036f",Fr="\\ufe20-\\ufe2f",Kr="\\u20d0-\\u20ff",zr=Vr+Fr+Kr,Br="["+zr+"]",Wr=RegExp(Br,"g");function Yr(r){return r=qr(r),r&&r.replace(Hr,Mr).replace(Wr,"")}var Zr=Yr,Jr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Qr(r){return r.match(Jr)||[]}var Xr=Qr,et=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function rt(r){return et.test(r)}var tt=rt,Z="\\ud800-\\udfff",nt="\\u0300-\\u036f",at="\\ufe20-\\ufe2f",st="\\u20d0-\\u20ff",it=nt+at+st,J="\\u2700-\\u27bf",Q="a-z\\xdf-\\xf6\\xf8-\\xff",ot="\\xac\\xb1\\xd7\\xf7",ct="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ut="\\u2000-\\u206f",pt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",X="A-Z\\xc0-\\xd6\\xd8-\\xde",gt="\\ufe0e\\ufe0f",ee=ot+ct+ut+pt,re="['’]",te="["+ee+"]",_t="["+it+"]",ne="\\d+",mt="["+J+"]",ae="["+Q+"]",se="[^"+Z+ee+ne+J+Q+X+"]",lt="\\ud83c[\\udffb-\\udfff]",bt="(?:"+_t+"|"+lt+")",ft="[^"+Z+"]",ie="(?:\\ud83c[\\udde6-\\uddff]){2}",oe="[\\ud800-\\udbff][\\udc00-\\udfff]",h="["+X+"]",St="\\u200d",ce="(?:"+ae+"|"+se+")",ht="(?:"+h+"|"+se+")",ue="(?:"+re+"(?:d|ll|m|re|s|t|ve))?",pe="(?:"+re+"(?:D|LL|M|RE|S|T|VE))?",ge=bt+"?",_e="["+gt+"]?",It="(?:"+St+"(?:"+[ft,ie,oe].join("|")+")"+_e+ge+")*",Tt="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Rt=_e+ge+It,yt="(?:"+[mt,ie,oe].join("|")+")"+Rt,Et=RegExp([h+"?"+ae+"+"+ue+"(?="+[te,h,"$"].join("|")+")",ht+"+"+pe+"(?="+[te,h+ce,"$"].join("|")+")",h+"?"+ce+"+"+ue,h+"+"+pe,Pt,Tt,ne,yt].join("|"),"g");function Ot(r){return r.match(Et)||[]}var At=Ot,Lt=Xr,jt=tt,vt=v,Ct=At;function Dt(r,t,n){return r=vt(r),t=n?void 0:t,t===void 0?jt(r)?Ct(r):Lt(r):r.match(t)||[]}var xt=Dt,Nt=Be,kt=Zr,Ut=xt,wt="['’]",Gt=RegExp(wt,"g");function dt(r){return function(t){return Nt(Ut(kt(t).replace(Gt,"")),r,"")}}var me=dt,$t=me,Mt=$t(function(r,t,n){return r+(n?"_":"")+t.toLowerCase()}),qt=Mt;function Ht(r,t,n){var a=-1,s=r.length;t<0&&(t=-t>s?0:s+t),n=n>s?s:n,n<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(s);++a<s;)o[a]=r[a+t];return o}var Vt=Ht,Ft=Vt;function Kt(r,t,n){var a=r.length;return n=n===void 0?a:n,!t&&n>=a?r:Ft(r,t,n)}var zt=Kt,Bt="\\ud800-\\udfff",Wt="\\u0300-\\u036f",Yt="\\ufe20-\\ufe2f",Zt="\\u20d0-\\u20ff",Jt=Wt+Yt+Zt,Qt="\\ufe0e\\ufe0f",Xt="\\u200d",en=RegExp("["+Xt+Bt+Jt+Qt+"]");function rn(r){return en.test(r)}var le=rn;function tn(r){return r.split("")}var nn=tn,be="\\ud800-\\udfff",an="\\u0300-\\u036f",sn="\\ufe20-\\ufe2f",on="\\u20d0-\\u20ff",cn=an+sn+on,un="\\ufe0e\\ufe0f",pn="["+be+"]",U="["+cn+"]",w="\\ud83c[\\udffb-\\udfff]",gn="(?:"+U+"|"+w+")",fe="[^"+be+"]",Se="(?:\\ud83c[\\udde6-\\uddff]){2}",he="[\\ud800-\\udbff][\\udc00-\\udfff]",_n="\\u200d",Ie=gn+"?",Te="["+un+"]?",mn="(?:"+_n+"(?:"+[fe,Se,he].join("|")+")"+Te+Ie+")*",ln=Te+Ie+mn,bn="(?:"+[fe+U+"?",U,Se,he,pn].join("|")+")",fn=RegExp(w+"(?="+w+")|"+bn+ln,"g");function Sn(r){return r.match(fn)||[]}var hn=Sn,In=nn,Tn=le,Pn=hn;function Rn(r){return Tn(r)?Pn(r):In(r)}var yn=Rn,En=zt,On=le,An=yn,Ln=v;function jn(r){return function(t){t=Ln(t);var n=On(t)?An(t):void 0,a=n?n[0]:t.charAt(0),s=n?En(n,1).join(""):t.slice(1);return a[r]()+s}}var vn=jn,Cn=vn,Dn=Cn("toUpperCase"),xn=Dn,Nn=v,kn=xn;function Un(r){return kn(Nn(r).toLowerCase())}var wn=Un,Gn=wn,dn=me,$n=dn(function(r,t,n){return t=t.toLowerCase(),r+(n?Gn(t):t)}),Mn=$n;class C{constructor(){this.logger=console,this.logInterceptorIds=[],this.isLogEnabled=!1,this.axios=R.create(),this.isLogEnabled&&this.addLogInterceptor()}addLogInterceptor(){const t=this.axios.interceptors.request.use(a=>(this.logger.log(`${a.url}`),a.data&&this.logger.info(`[Body]: ${JSON.stringify(a.data,null,4)}`),a),a=>{throw this.logger.error(a),a}),n=this.axios.interceptors.response.use(a=>(this.logger.log(`[Response]: ${JSON.stringify(a.data,null,4)}`),a),a=>{const{response:s,message:o,config:{method:_,url:c,data:m,params:u}}=a,p=s==null?void 0:s.status;throw this.logger.error({status:p,message:o,method:_,url:c,data:m,params:u}),a});this.logInterceptorIds=[t,n]}removeLogInterceptor(){this.logInterceptorIds.forEach(this.axios.interceptors.request.eject)}static getInstance(){return this.instance??(this.instance=new C)}setLogEnabled(t){return this.isLogEnabled=t,this.isLogEnabled?this.addLogInterceptor():this.removeLogInterceptor(),this.isLogEnabled}get(t,n){return this.axios.get(t,{params:n})}post(t,n,a){return this.axios.post(t,a,{params:n})}}class f{constructor(){this.isLogEnabled=!1}static getInstance(){return this.instance??(this.instance=new f)}get value(){return{partner_id:this.partnerId??"",partner_key:this.partnerKey??"",base_url:this.baseURL??"",access_token:this.accessToken??"",shop_id:this.shopId??""}}}const Pe=C.getInstance();function b(r){async function t(n){if(!r.transformRequestParameter)return n;const a=r.transformRequestParameter(n);if(!r.transformRequestParameterSchema)return n;const s=await r.transformRequestParameterSchema.safeParseAsync(a);if(!s.success)throw new Error(`transform request parameters error: ${s.error.message}`);return s.data}return async function(a){const s=await r.requestParameterSchema.safeParseAsync(a);if(!s.success)throw new Error(`parse request parameters error: ${s.error.message}`);const o=await t(s.data),_=r.toCamelCase?L(o,l=>qt(l.toString())):o,c=f.getInstance(),m=c.value;Pe.setLogEnabled(c.isLogEnabled);const u=await N({...m,path:r.path,params:_}),p=await Pe.get(u),I=r.toCamelCase?L(p.data,l=>Mn(l.toString())):p.data,T=await r.responseSchema.safeParseAsync(I);if(!T.success)throw new Error(`parse response error: ${T.error.message}`);return T.data}}const Re=C.getInstance();function S(r){return async function(n){const a=r.transformRequestParameter??(I=>I),s=await r.requestParameterSchema.transform(a).safeParseAsync(n);if(!s.success)throw new Error(`parse request parameters error: ${s.error.message}`);const o=f.getInstance(),_=o.value;Re.setLogEnabled(o.isLogEnabled);const c=await N({..._,path:r.path,params:{}}),m=s.data,{data:u}=await Re.post(c,{},m),p=await r.responseSchema.safeParseAsync(u);if(!p.success)throw new Error(`parse response error: ${p.error.message}`);return p.data}}const ye="/api/v2/logistic/get_shipping_parameter",Ee="/api/v2/logistic/ship_order",Oe="/api/v2/logistics/update_shipping_order",Ae="/api/v2/logistics/get_tracking_number",Le="/api/v2/logistic/get_shipping_document_parameter",je="/api/v2/logistic/create_shipping_document",ve="/api/v2/logistics/get_shipping_document_result",Ce="/api/v2/logistics/download_shipping_document",G=["plp_number","first_mile_tracking_number","last_mile_tracking_number"],qn=O(G),D=["NORMAL_AIR_WAYBILL","THERMAL_AIR_WAYBILL","NORMAL_JOB_AIR_WAYBILL","THERMAL_JOB_AIR_WAYBILL"],De=["READY","FAILED","PROCESSING"],Hn=e.z.object({orderList:e.z.array(e.z.object({orderSn:e.z.string(),packageNumber:e.z.string().optional(),trackingNumber:e.z.string().optional(),shippingDocumentType:e.z.enum(D).optional()})).max(50)}),Vn=e.z.object({error:e.z.string().optional(),message:e.z.string().optional(),warning:e.z.object({orderSn:e.z.string(),packageNumber:e.z.number().optional()}).optional(),response:e.z.object({orderSn:e.z.string(),packageNumber:e.z.number().optional(),suggestShippingDocumentType:e.z.string(),selectableShippingDocumentType:e.z.array(e.z.string()),failError:e.z.string(),failMessage:e.z.string()}).optional(),requestId:e.z.string()}),Fn=S({path:je,requestParameterSchema:Hn,responseSchema:Vn}),Kn=e.z.object({shippingDocumentType:e.z.enum(D).optional(),orderList:e.z.array(e.z.object({orderSn:e.z.string(),packageNumber:e.z.string().optional()})).max(50)}),zn=e.z.any(),Bn=S({path:Ce,requestParameterSchema:Kn,responseSchema:zn}),Wn=e.z.object({orderList:e.z.array(e.z.object({orderSn:e.z.string(),packageNumber:e.z.number().optional()})).max(50)}),Yn=e.z.object({error:e.z.string().optional(),message:e.z.string().optional(),warning:e.z.object({orderSn:e.z.string(),packageNumber:e.z.number().optional()}).optional(),response:e.z.object({orderSn:e.z.string(),packageNumber:e.z.number().optional(),suggestShippingDocumentType:e.z.string(),selectableShippingDocumentType:e.z.array(e.z.string()),failError:e.z.string(),failMessage:e.z.string()}).optional(),requestId:e.z.string()}),Zn=S({path:Le,requestParameterSchema:Wn,responseSchema:Yn}),Jn=e.z.object({orderList:e.z.array(e.z.object({orderSn:e.z.string(),packageNumber:e.z.string().optional(),shippingDocumentType:e.z.enum(D).optional()})).max(50)}),Qn=e.z.object({error:e.z.string().optional(),message:e.z.string().optional(),warning:e.z.object({orderSn:e.z.string(),packageNumber:e.z.number().optional()}).optional(),response:e.z.object({orderSn:e.z.string(),packageNumber:e.z.string(),status:e.z.enum(De),failError:e.z.string(),failMessage:e.z.string()}).optional(),requestId:e.z.string()}),Xn=S({path:ve,requestParameterSchema:Jn,responseSchema:Qn}),xe=e.z.object({orderSn:e.z.string(),packageNumber:e.z.number().optional(),responseOptionalFields:e.z.array(e.z.enum(G)).optional()}),ea=e.z.object({error:e.z.string().optional(),message:e.z.string().optional(),response:e.z.object({}).optional(),requestId:e.z.string()}),ra=b({path:Ae,requestParameterSchema:xe,responseSchema:ea,transformRequestParameterSchema:xe.extend({responseOptionalFields:e.z.string().optional()}),transformRequestParameter(r){var t;return{...r,responseOptionalFields:(t=r.responseOptionalFields)==null?void 0:t.join(",")}},toCamelCase:!0}),ta=e.z.object({orderSn:e.z.string(),packageNumber:e.z.number().optional()}),na=e.z.object({error:e.z.string().optional(),message:e.z.string().optional(),response:e.z.object({infoNeeded:e.z.object({dropoff:e.z.array(e.z.string()),pickup:e.z.array(e.z.string()),nonIntegrated:e.z.array(e.z.string())}),dropoff:e.z.object({branchList:e.z.array(e.z.object({branch_id:e.z.number(),region:e.z.string(),state:e.z.string(),city:e.z.string(),address:e.z.string(),zipcode:e.z.string(),district:e.z.string(),town:e.z.string()})),slugList:e.z.array(e.z.object({slug:e.z.string(),slugName:e.z.string()}))}),pickup:e.z.object({addressList:e.z.array(e.z.object({addressId:e.z.number(),region:e.z.string(),state:e.z.string(),city:e.z.string(),district:e.z.string(),town:e.z.string(),address:e.z.string(),zipcode:e.z.string(),addressFlag:e.z.array(e.z.string())})),timeSlotList:e.z.array(e.z.object({date:e.z.number(),timeText:e.z.string(),pickupTimeId:e.z.string()}))})}).optional(),requestId:e.z.string()}),aa=b({path:ye,requestParameterSchema:ta,responseSchema:na,toCamelCase:!0}),sa=e.z.object({orderSn:e.z.string(),packageNumber:e.z.string().optional(),pickup:e.z.object({addressId:e.z.number().optional(),pickupTimeId:e.z.string().optional(),trackingNumber:e.z.string().optional()}).optional(),dropoff:e.z.object({branchId:e.z.number().optional(),senderRealName:e.z.string().optional(),trackingNumber:e.z.string().optional(),slug:e.z.string().optional()}).optional(),nonIntegrated:e.z.object({trackingNumber:e.z.string().optional()}).optional()}),ia=e.z.object({error:e.z.string().optional(),message:e.z.string().optional(),requestId:e.z.string()}),oa=S({path:Ee,requestParameterSchema:sa,responseSchema:ia}),ca=e.z.object({orderSn:e.z.string(),packageNumber:e.z.string().optional(),pickup:e.z.object({addressId:e.z.number(),pickupTimeId:e.z.string()})}),ua=e.z.object({error:e.z.string().optional(),message:e.z.string().optional(),requestId:e.z.string()}),pa=S({path:Oe,requestParameterSchema:ca,responseSchema:ua}),ga=Object.freeze(Object.defineProperty({__proto__:null,createShippingDocument:Fn,downloadShippingDocument:Bn,getShippingDocumentParameter:Zn,getShippingDocumentResult:Xn,getShippingParameter:aa,getTrackingNumber:ra,shipOrder:oa,updateShipOrder:pa},Symbol.toStringTag,{value:"Module"})),Ne="/api/v2/order/get_order_list",ke="/api/v2/order/get_order_detail",d=["UNPAID","READY_TO_SHIP","PROCESSED","SHIPPED","COMPLETED","IN_CANCEL","CANCELLED","INVOICE_PENDING"],_a=O(d),Ue=["buyer_user_id","buyer_username","estimated_shipping_fee","recipient_address","actual_shipping_fee","goods_to_declare","note","note_update_time","item_list","pay_time","dropshipper","dropshipper_phone","split_up","buyer_cancel_reason","cancel_by","cancel_reason","actual_shipping_fee_confirmed","buyer_cpf_id","fulfillment_flag","pickup_done_time","package_list","shipping_carrier","payment_method","total_amount","buyer_username","invoice_data","checkout_shipping_carrier","reverse_shipping_fee","order_chargeable_weight_gram","edt","prescription_images","prescription_check_status"],ma=O(Ue),la=e.z.object({orderSnList:e.z.array(e.z.string()),responseOptionalFields:e.z.string().optional()}),ba=e.z.object({error:e.z.string().optional(),message:e.z.string().optional(),response:e.z.object({orderList:e.z.array(e.z.object({checkoutShippingCarrier:e.z.string().nullable(),reverseShippingFee:e.z.number().nullable(),actualShippingFee:e.z.number().nullable(),actualShippingFeeConfirmed:e.z.boolean(),buyerCancelReason:e.z.string(),buyerCpfId:e.z.string().nullable(),buyerUserId:e.z.number(),buyerUsername:e.z.string(),cancelBy:e.z.string(),cancelReason:e.z.string(),cod:e.z.boolean(),createTime:e.z.number(),currency:e.z.string(),daysToShip:e.z.number(),dropshipper:e.z.string(),dropshipperPhone:e.z.string(),estimatedShippingFee:e.z.number(),fulfillmentFlag:e.z.string(),goodsToDeclare:e.z.boolean(),invoiceData:e.z.object({number:e.z.string(),seriesNumber:e.z.string(),accessKey:e.z.string(),issueDate:e.z.number(),totalValue:e.z.number(),productsTotalValue:e.z.number(),taxCode:e.z.string()}).nullable(),itemList:e.z.array(e.z.object({itemId:e.z.number(),itemName:e.z.string(),itemSku:e.z.string(),modelId:e.z.number(),modelName:e.z.string(),modelSku:e.z.string(),modelQuantityPurchased:e.z.number(),modelOriginalPrice:e.z.number(),modelDiscountedPrice:e.z.number(),wholesale:e.z.boolean(),weight:e.z.number(),addOnDeal:e.z.boolean(),mainItem:e.z.boolean(),addOnDealId:e.z.number(),promotionType:e.z.string(),promotionId:e.z.number(),orderItemId:e.z.number(),promotionGroupId:e.z.number(),imageInfo:e.z.object({imageUrl:e.z.string()}),productLocationId:e.z.array(e.z.string())})),prescriptionImages:e.z.array(e.z.string()),prescriptionCheckStatus:e.z.number(),edtFrom:e.z.number(),edtTo:e.z.number(),orderChargeableWeightGram:e.z.number(),messageToSeller:e.z.string(),note:e.z.string(),noteUpdateTime:e.z.number(),orderSn:e.z.string(),orderStatus:e.z.string(),packageList:e.z.array(e.z.object({packageNumber:e.z.string(),logisticsStatus:e.z.string(),shippingCarrier:e.z.string(),itemList:e.z.array(e.z.object({itemId:e.z.number(),modelId:e.z.number(),modelQuantity:e.z.number()})),parcelChargeableWeightGram:e.z.number()})),payTime:e.z.number(),paymentMethod:e.z.string(),pickupDoneTime:e.z.number(),recipientAddress:e.z.object({name:e.z.string(),phone:e.z.string(),town:e.z.string(),district:e.z.string(),city:e.z.string(),state:e.z.string(),region:e.z.string(),zipcode:e.z.string(),fullAddress:e.z.string()}),region:e.z.string(),shipByDate:e.z.number(),shippingCarrier:e.z.string(),splitUp:e.z.boolean(),totalAmount:e.z.number(),updateTime:e.z.number()}))}).optional(),requestId:e.z.string()}),fa=b({path:ke,requestParameterSchema:la,responseSchema:ba}),Sa=e.z.object({timeRangeField:e.z.enum(["create_time","update_time"]),timeFrom:e.z.date(),timeTo:e.z.date(),pageSize:e.z.number().min(1).max(100),cursor:e.z.string().optional(),orderStatus:e.z.enum(d).optional(),responseOptionalFields:e.z.enum(["order_status"]).optional().default("order_status")}),ha=e.z.object({error:e.z.string().optional(),message:e.z.string().optional(),response:e.z.object({more:e.z.boolean(),nextCursor:e.z.string(),orderList:e.z.array(e.z.object({orderSn:e.z.string()}))}).optional(),requestId:e.z.string()}),Ia=b({path:Ne,requestParameterSchema:Sa,responseSchema:ha,toCamelCase:!0}),Ta=Object.freeze(Object.defineProperty({__proto__:null,getOrderDetail:fa,getOrderList:Ia},Symbol.toStringTag,{value:"Module"})),we="/api/v2/product/get_item_base_info",Ge="/api/v2/product/get_item_extra_info",de="/api/v2/product/get_item_list",$e="/api/v2/product/get_model_list",$=["NORMAL","DELETED","UNLIST","BANNED"],Pa=e.z.object({item_id_list:e.z.string(),need_tax_info:e.z.coerce.boolean().optional(),need_complaint_policy:e.z.coerce.boolean().optional()}),Ra=e.z.object({error:e.z.string(),message:e.z.string(),warning:e.z.string(),request_id:e.z.string(),response:e.z.object({item_list:e.z.array(e.z.object({item_id:e.z.number(),category_id:e.z.number(),item_name:e.z.string(),item_sku:e.z.string(),create_time:e.z.number(),update_time:e.z.number(),attribute_list:e.z.array(e.z.object({attribute_id:e.z.number(),original_attribute_name:e.z.string(),is_mandatory:e.z.boolean(),attribute_value_list:e.z.array(e.z.object({value_id:e.z.number(),original_value_name:e.z.string(),value_unit:e.z.string()}))})).optional(),price_info:e.z.array(e.z.object({currency:e.z.string(),original_price:e.z.number(),current_price:e.z.number()})).optional(),stock_info_v2:e.z.object({summary_info:e.z.object({total_reserved_stock:e.z.number(),total_available_stock:e.z.number()}),seller_stock:e.z.array(e.z.object({location_id:e.z.string(),stock:e.z.number()})).optional()}).optional(),image:e.z.object({image_url_list:e.z.array(e.z.string()),image_id_list:e.z.array(e.z.string())}),weight:e.z.string(),dimension:e.z.object({package_length:e.z.number(),package_width:e.z.number(),package_height:e.z.number()}),logistic_info:e.z.array(e.z.object({logistic_id:e.z.number(),logistic_name:e.z.string(),enabled:e.z.boolean(),shipping_fee:e.z.number().optional(),is_free:e.z.boolean(),estimated_shipping_fee:e.z.number().optional()})).optional(),pre_order:e.z.object({is_pre_order:e.z.boolean(),days_to_ship:e.z.number()}),condition:e.z.string(),size_chart:e.z.string(),item_status:e.z.string(),has_model:e.z.boolean(),promotion_id:e.z.number().optional(),brand:e.z.object({brand_id:e.z.number(),original_brand_name:e.z.string()}),tax_info:e.z.object({ncm:e.z.number(),same_state_cfop:e.z.number(),diff_state_cfop:e.z.number(),csosn:e.z.number(),origin:e.z.number()}).optional(),description_type:e.z.string(),description_info:e.z.object({extended_description:e.z.object({field_list:e.z.array(e.z.object({field_type:e.z.string(),text:e.z.string().optional(),image_info:e.z.object({image_id:e.z.string(),image_url:e.z.string()}).optional()}))}).optional()}).optional()})).optional()})}),ya=b({path:we,requestParameterSchema:Pa,responseSchema:Ra,transformRequestParameter(r){return r.need_tax_info=!!r.need_tax_info,r.need_complaint_policy=!!r.need_complaint_policy,r}}),Ea=e.z.object({item_id_list:e.z.string()}),Oa=e.z.object({error:e.z.string(),message:e.z.string(),warning:e.z.string().optional(),request_id:e.z.string(),response:e.z.object({item_list:e.z.array(e.z.object({item_id:e.z.number(),sale:e.z.number(),views:e.z.number(),likes:e.z.number(),rating_star:e.z.number(),comment_count:e.z.number()})).optional()}).optional()}),Aa=b({path:Ge,requestParameterSchema:Ea,responseSchema:Oa}),La=e.z.object({offset:e.z.number().int().min(0).optional(),page_size:e.z.number().int().positive().max(100).optional(),update_time_from:e.z.date().optional(),update_time_to:e.z.date().optional(),item_status:e.z.array(e.z.enum($))}),ja=e.z.object({error:e.z.string(),message:e.z.string().nullable().optional(),warning:e.z.string().nullable().optional(),request_id:e.z.string(),response:e.z.object({item:e.z.array(e.z.object({item_id:e.z.number().int(),item_status:e.z.enum($),update_time:e.z.number().int()})).optional()}).optional(),total_count:e.z.number().int().optional(),has_next_page:e.z.boolean().optional(),next_offset:e.z.number().int().optional()}),va=b({path:de,requestParameterSchema:La,transformRequestParameter(r){return r.update_time_from=r.update_time_from??new Date("01/01/2022"),r.update_time_to=r.update_time_to??new Date,r},responseSchema:ja}),Ca=e.z.object({item_id:e.z.string()}),Da=e.z.object({error:e.z.string(),message:e.z.string(),warning:e.z.string(),request_id:e.z.string(),response:e.z.object({tier_variation:e.z.array(e.z.object({name:e.z.string(),option_list:e.z.array(e.z.object({option:e.z.string()}))})),model:e.z.array(e.z.object({model_id:e.z.number(),model_status:e.z.string(),promotion_id:e.z.number(),tier_index:e.z.array(e.z.number()),price_info:e.z.array(e.z.object({current_price:e.z.number(),original_price:e.z.number(),inflated_price_of_current_price:e.z.number(),inflated_price_of_original_price:e.z.number()})),model_sku:e.z.string(),pre_order:e.z.object({is_pre_order:e.z.boolean(),days_to_ship:e.z.number()}),stock_info_v2:e.z.object({summary_info:e.z.object({total_reserved_stock:e.z.number(),total_available_stock:e.z.number()}),seller_stock:e.z.array(e.z.object({location_id:e.z.string(),stock:e.z.number()}))})}))})}),xa=b({path:$e,requestParameterSchema:Ca,responseSchema:Da}),Na=Object.freeze(Object.defineProperty({__proto__:null,getItemBaseInfo:ya,getItemExtraInfo:Aa,getItemList:va,getModelList:xa},Symbol.toStringTag,{value:"Module"})),Me="/api/v2/auth/token/get",qe=e.z.object({code:e.z.string(),partner_id:e.z.number().optional(),shop_id:e.z.number().optional(),main_account_id:e.z.number().optional()}),He=e.z.object({access_token:e.z.string(),error:e.z.string(),expires_in:e.z.number(),message:e.z.string(),refresh_token:e.z.string(),request_id:e.z.string(),shop_id_list:e.z.array(e.z.number())}),ka=S({path:Me,requestParameterSchema:qe,responseSchema:He,transformRequestParameter(r){return r.partner_id=r.partner_id??f.getInstance().partnerId,r}}),Ua=Object.freeze(Object.defineProperty({__proto__:null,getAccessToken:ka,getAccessTokenRequestParametersSchema:qe,getAccessTokenResponseSchema:He},Symbol.toStringTag,{value:"Module"})),M="/api/v2/shop/auth_partner";async function wa({redirectURL:r,redirectSign:t}){const{baseURL:n,partnerId:a,partnerKey:s}=f.getInstance();if(!s||!a)throw new Error("partnerKey is undefined");const o=new URL(M,n),_=A(new Date),c=await x(s,a.toString(),M,_),m=new URL(r);return m.searchParams.append("sign",t),o.search=new URLSearchParams({partner_id:a.toString(),redirect:m.toString(),timestamp:_,sign:c}).toString(),o.toString()}const Ga=e.z.object({code:e.z.string(),shop_id:e.z.string(),sign:e.z.string()});async function da(r){const t=await Ga.safeParseAsync(r);if(!t.success)throw new Error(`parse request parameters error: ${t.error.message}`);const{code:n,shop_id:a,sign:s}=t.data;return{code:n,shopId:a,sign:s}}const $a=Object.freeze(Object.defineProperty({__proto__:null,logistic:ga,order:Ta,product:Na,publicShopee:Ua,shop:Object.freeze(Object.defineProperty({__proto__:null,authPartner:wa,verifyCallback:da},Symbol.toStringTag,{value:"Module"}))},Symbol.toStringTag,{value:"Module"})),q=e.z.object({partnerId:e.z.coerce.number().optional(),partnerKey:e.z.coerce.string().optional(),baseURL:e.z.coerce.string().url().optional(),accessToken:e.z.coerce.string().optional(),shopId:e.z.coerce.number().optional()}).safeParse({partnerId:process.env.SHOPEE_SDK_PARTNER_ID,partnerKey:process.env.SHOPEE_SDK_PARTNER_KEY,baseURL:process.env.SHOPEE_SDK_BASE_URL,accessToken:process.env.SHOPEE_SDK_ACCESS_TOKEN,shopId:process.env.SHOPEE_SDK_SHOP_ID});if(!q.success)throw new Error(q.error.message);const E=q.data,g=f.getInstance();class Ma{constructor(t){g.accessToken=t.accessToken??E.accessToken,g.baseURL=t.baseURL??E.baseURL,g.partnerId=t.partnerId??E.partnerId,g.partnerKey=t.partnerKey??E.partnerKey,g.shopId=t.shopId??E.shopId,g.isLogEnabled=t.isLogEnabled??!1}setPartnerId(t){return g.partnerId=t,this}setBaseURL(t){return g.baseURL=t,this}setPartnerKey(t){return g.partnerKey=t,this}setAccessToken(t){return g.accessToken=t,this}setShopId(t){return g.shopId=t,this}setIsLogEnabled(t){return g.isLogEnabled=t,this}get v2(){return $a}}i.API_V2_LOGISTIC_CREATE_SHIPPING_DOCUMENT=je,i.API_V2_LOGISTIC_DOWNLOAD_SHIPPING_DOCUMENT=Ce,i.API_V2_LOGISTIC_GET_SHIPPING_DOCUMENT_PARAMETER=Le,i.API_V2_LOGISTIC_GET_SHIPPING_DOCUMENT_RESULT=ve,i.API_V2_LOGISTIC_GET_SHIPPING_PARAMETER=ye,i.API_V2_LOGISTIC_GET_TRACKING_NUMBER=Ae,i.API_V2_LOGISTIC_SHIP_ORDER=Ee,i.API_V2_LOGISTIC_UPDATE_SHIP_ORDER=Oe,i.API_V2_ORDER_GET_ORDER_DETAIL_PATH=ke,i.API_V2_ORDER_GET_ORDER_LIST_PATH=Ne,i.API_V2_PRODUCT_GET_ITEM_BASE_INFO_PATH=we,i.API_V2_PRODUCT_GET_ITEM_EXTRA_INFO_PATH=Ge,i.API_V2_PRODUCT_GET_ITEM_LIST_PATH=de,i.API_V2_PRODUCT_GET_MODEL_LIST_PATH=$e,i.API_V2_PUBLIC_GET_ACCESS_TOKEN_PATH=Me,i.API_V2_SHOP_AUTH_PARTNER=M,i.ITEM_STATUS=$,i.ShopeeSdk=Ma,i.V2_LOGISTIC_GET_TRACKING_NUMBER_RESPONSE_OPTIONAL_FIELDS=G,i.V2_LOGISTIC_GET_TRACKING_NUMBER_RESPONSE_OPTIONAL_FIELDS_MAP=qn,i.V2_LOGISTIC_SHIPPING_DOCUMENT_TYPES=D,i.V2_LOGISTIC_SHIPPING_STATUSES=De,i.V2_ORDER_RESPONSE_OPTIONAL_FIELDS=Ue,i.V2_ORDER_RESPONSE_OPTIONAL_FIELDS_MAP=ma,i.V2_ORDER_STATUS=d,i.V2_ORDER_STATUS_MAP=_a,i.createConstantsMap=O,i.generateHmac=x,i.signURL=N,i.toTimestamp=A,i.transformObjectKeys=L,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
